<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGV Simulation Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="connection-status" id="connectionStatus">Connecting...</div>
    
    <div class="container">
        <div class="header">
            <h1>ðŸš› AGV Simulation Dashboard</h1>
            <p>Real-time Autonomous Ground Vehicle Monitoring & Control</p>
        </div>

        <div class="dashboard">
            <!-- Control Panel -->
            <div class="panel">
                <h3>ðŸŽ® Control Center</h3>
                
                <!-- File Upload Section -->
                <div class="file-upload">
                    <script src="main.js"></script>
                    
                    if (agv.battery <= 30) {
                        batteryColor = '#f56565'; // Red
                        batteryIcon = 'ðŸª«';
                    } else if (agv.battery <= 60) {
                        batteryColor = '#ed8936'; // Orange
                        batteryIcon = 'ðŸ”‹';
                    }
                    
                    if (agv.status === 'charging') {
                        statusIcon = 'âš¡';
                        batteryColor = '#f6e05e'; // Yellow
                    } else if (agv.status === 'charging_route') {
                        statusIcon = 'ðŸ”‹âž¡ï¸';
                    } else if (agv.status === 'busy') {
                        statusIcon = 'ðŸš›';
                    } else {
                        statusIcon = 'ðŸ ';
                    }
                    
                    cardElement.innerHTML = `
                        <h4>${agv.id} ${statusIcon}</h4>
                        <div class="value" style="color: ${batteryColor}">
                            ${batteryIcon} ${agv.battery}%<br>
                            <small style="font-size: 0.6em; color: #666;">
                                Node ${agv.position} | ${agv.status}
                            </small>
                        </div>
                    `;
                    statusGrid.appendChild(cardElement);
                });
                
                // Update AGV positions and battery indicators
                Object.values(status.agvs).forEach(agv => {
                    updateAGVPosition(agv.id, agv.position);
                    updateAGVBattery(agv.id, agv.battery);
                });
            }
        }

        function addLog(message, type = 'system') {
            const logsContainer = document.getElementById('logsContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            logsContainer.insertBefore(logEntry, logsContainer.firstChild);
            
            // Keep only last 50 logs
            while (logsContainer.children.length > 50) {
                logsContainer.removeChild(logsContainer.lastChild);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
